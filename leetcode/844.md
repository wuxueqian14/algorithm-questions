# 844. 比较含退格的字符串

## 栈辅助

通过栈辅助重新构造字符串。如果是退格字符，将栈顶字符弹出；如果是普通字符，压入栈中。

时间复杂度：O(n)。
空间复杂度：O(n)。

```cpp
class Solution {
public:
    bool backspaceCompare(string s, string t) {
        return rebuild(s) == rebuild(t);
    }

    string rebuild(string s) {
        string res;
        for (auto c : s) {
            if (c != '#') {
                res.push_back(c);
            } else if (!res.empty()) {
                res.pop_back();
            }
        }
        return res;
    }
};
```

## 同向双指针

逆序开始遇到#记录，遇到字母看之前有无#，有#跳过，无#停下来进行比较。

时间复杂度：O(n)。
空间复杂度：O(1)。

```cpp
class Solution {
public:
    bool backspaceCompare(string s, string t) {
        int i = s.size() - 1, j = t.size() - 1;
        int t1 = 0, t2 = 0;
        while (i >= 0 || j >= 0) {
            while (i >= 0) {
                if (s[i] == '#') {
                    t1++;
                    i--;
                } else if (t1 > 0) {
                    t1--;
                    i--;
                } else {
                    break;
                }
            }
            while (j >= 0) {
                if (t[j] == '#') {
                    t2++;
                    j--;
                } else if (t2 > 0) {
                    t2--;
                    j--;
                } else {
                    break;
                }
            }
            if (i >= 0 && j >= 0) {
                if (s[i] != t[j]) {
                    return false;
                }
            } else if (i >= 0 || j >= 0) {
                // 一个有字符，另一个没有字符
                return false;
            }
            i--, j--;
        }
        // 两个都没有字符且通过检查
        return true;
    }
};
```